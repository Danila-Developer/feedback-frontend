import React from 'react';
import { useSelector } from "react-redux";
import {TransitionGroup, CSSTransition} from 'react-transition-group'
import classes from 'modules/alert/components/alert_messages/AlertMessage.module.css'


const iconsPath = {
    error: process.env.PUBLIC_URL + 'img/alert/error_alert.svg'
}

const AlertMessage = ({alertType, alertMessage}) => {
    return (
        <div className={[classes.alertMessage, classes[alertType]].join(' ')}>
            <img src={iconsPath[alertType]} className={classes.alertMessageIcon} />
            <div className={classes.alertMessageText}>{alertMessage}</div>
        </div>
    )
}



const AlertMessages = () => {
    const alerts = useSelector(state => state.alert)
    // const alerts = [{
    //     alertType: 'error',
    //     alertMessage: 'Ошибка блин!'
    // }]

    return (
        <TransitionGroup className={classes.alertWrapper} >
            {
                alerts.map(alert =>
                    <CSSTransition
                        key={alert.alertId}
                        classNames={{
                            enter: classes.alertEnter,
                            enterActive: classes.alertEnterActive,
                            exit: classes.alertExit,
                            exitActive: classes.alertExitActive
                        }}
                        timeout={1500}
                    >
                        <AlertMessage alertType={alert.alertType} alertMessage={alert.alertMessage} />
                    </CSSTransition>
                )
            }
        </TransitionGroup>
    );
};

export default AlertMessages;