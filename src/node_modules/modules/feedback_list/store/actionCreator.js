import {ADD_COMMENT,
        LOAD_COMMENT,
        START_LOAD_COMMENT,
        END_LOAD_COMMENT,
        ERROR_LOAD_COMMENT
} from 'modules/feedback_list/store/actionTypes'
import { loadComments as loadCommentAPI } from 'modules/feedback_list/API/loadComments'
import { getAddAlertAction } from 'modules/alert'

export function getAddCommentAction({userName, createDate, userImageUrl, commentText}) {
    return {type: ADD_COMMENT, payload: {userName, createDate, userImageUrl, commentText}}
}

export function getLoadCommentAction() {
    return async dispatch => {
        try {
            dispatch(getStartLoadCommentAction())
            const payload = await loadCommentAPI()
            dispatch(getEndLoadCommentAction())
            dispatch({type: LOAD_COMMENT, payload: payload})
        } catch (err) {
            dispatch(getAddAlertAction('error', 'Ошибка загрузки'))
            dispatch(getEndLoadCommentAction())
        }

    }
}

export function getStartLoadCommentAction() {
    return {type: START_LOAD_COMMENT}
}

export function getEndLoadCommentAction() {
    return {type: END_LOAD_COMMENT}
}
